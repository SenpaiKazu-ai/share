import base64;exec(base64.b64decode(b'aW1wb3J0IHJlcXVlc3RzCmltcG9ydCBqc29uCmltcG9ydCBvcwppbXBvcnQgcmUKaW1wb3J0IHN5cwppbXBvcnQgdGltZQppbXBvcnQgcmFuZG9tCmltcG9ydCBzdHJpbmcKaW1wb3J0IHRocmVhZGluZwpmcm9tIGdldHVzZXJhZ2VudCBpbXBvcnQgVXNlckFnZW50CmZyb20gcmljaCBpbXBvcnQgcHJpbnQgYXMgcmljaF9wcmludApmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yCgojIEVuaGFuY2VkIGNvbG9yIHBhbGV0dGUKZGFya2JsdWUgPSAiXDAzM1szNG0iCmdyZWVuID0gIlwwMzNbMTszMm0iCnJlZCA9ICJcMDMzWzE7MzFtIgp5ZWxsb3cgPSAiXDAzM1sxOzMzbSIKc2t5Ymx1ZSA9ICJcMDMzWzE7MzZtIgpibHVlID0gIlwwMzNbMTszNG0iCmxpZ2h0Ymx1ZSA9ICJcMDMzWzM4OzU7ODFtIgp3aGl0ZSA9ICJcMDMzWzE7MzdtIgpSID0gIlwwMzNbMzFtIgpHID0gIlwwMzNbMzJtIgpZID0gIlwwMzNbMzNtIgpCID0gIlwwMzNbMzRtIgpNID0gIlwwMzNbMzVtIgpQID0gIlwwMzNbMzZtIgpDID0gIlwwMzNbMzdtIgpMSUdIVF9HUkVFTiA9ICJcMDMzWzkybSIKWUVMTE9XX0JSSUdIVCA9ICJcMDMzWzkzbSIKTkVPTl9QSU5LID0gIlwwMzNbMzg7NTsyMTNtIgpORU9OX0NZQU4gPSAiXDAzM1szODs1OzUxbSIKTkVPTl9HUkVFTiA9ICJcMDMzWzM4OzU7NDZtIgpQVVJQTEUgPSAiXDAzM1szODs1OzEzNW0iClJFU0VUID0gIlwwMzNbMG0iCgpBQ0NPVU5UU19ESVIgPSBvcy5wYXRoLmpvaW4ob3MucGF0aC5kaXJuYW1lKF9fZmlsZV9fKSwgJ2FjY291bnRzJykKQ09ERV9GSUxFID0gb3MucGF0aC5qb2luKEFDQ09VTlRTX0RJUiwgJ2dlbmVyYXRlZF9jb2RlLnR4dCcpCkNPT0tJRVNfRklMRSA9IG9zLnBhdGguam9pbihBQ0NPVU5UU19ESVIsICdjb29raWVzLnR4dCcpClRPS0VOU19GSUxFID0gb3MucGF0aC5qb2luKEFDQ09VTlRTX0RJUiwgJ3Rva2Vucy50eHQnKQoKCmRlZiBlbnN1cmVfZmlsZV9leGlzdHMoKToKICAgICIiIkVuc3VyZSB0aGF0IHRoZSBhY2NvdW50cyBkaXJlY3RvcnkgYW5kIHRoZSBjb2RlIGZpbGUgZXhpc3QgYnkgY3JlYXRpbmcgdGhlbSBpZiB0aGV5IGRvbid0IGV4aXN0LiIiIgogICAgb3MubWFrZWRpcnMoQUNDT1VOVFNfRElSLCBleGlzdF9vaz1UcnVlKQogICAgb3BlbihDT0RFX0ZJTEUsICdhJykuY2xvc2UoKSAgIyBUaGlzIHdpbGwgY3JlYXRlIHRoZSBmaWxlIGlmIGl0IGRvZXNuJ3QgZXhpc3QsIGJ1dCB3b24ndCBtb2RpZnkgaXQuCgpkZWYgZ2VuZXJhdGVfY29kZSgpOgogICAgIiIiR2VuZXJhdGUgYSB1bmlxdWUgY29kZSBpbiB0aGUgZm9ybWF0IFNBTU1ZLVhYWC1YWFhYWC4iIiIKICAgIHByZWZpeCA9ICJTQU1NWSIKICAgIG51bWJlcl9wYXJ0ID0gJycuam9pbihyYW5kb20uY2hvaWNlcyhzdHJpbmcuZGlnaXRzLCBrPTMpKSAgIyAzIHJhbmRvbSBkaWdpdHMKICAgIGxldHRlcnNfcGFydCA9ICcnLmpvaW4ocmFuZG9tLmNob2ljZXMoc3RyaW5nLmFzY2lpX3VwcGVyY2FzZSArIHN0cmluZy5kaWdpdHMsIGs9NSkpICAjIDUgYWxwaGFudW1lcmljIGNoYXJhY3RlcnMKICAgIGNvZGUgPSBmIntwcmVmaXh9LXtudW1iZXJfcGFydH0te2xldHRlcnNfcGFydH0iCiAgICByZXR1cm4gY29kZQogICAKCmRlZiBzYXZlX2NvZGUoY29kZSk6CiAgICAiIiJTYXZlIHRoZSBnZW5lcmF0ZWQgY29kZSB0byBhIGZpbGUuIiIiCiAgICB3aXRoIG9wZW4oQ09ERV9GSUxFLCAndycpIGFzIGZpbGU6CiAgICAgICAgZmlsZS53cml0ZShjb2RlKQoKZGVmIGxvYWRfY29kZSgpOgogICAgIiIiTG9hZCB0aGUgY29kZSBmcm9tIHRoZSBmaWxlLCBpZiBpdCBleGlzdHMuIiIiCiAgICBpZiBvcy5wYXRoLmV4aXN0cyhDT0RFX0ZJTEUpOgogICAgICAgIHdpdGggb3BlbihDT0RFX0ZJTEUsICdyJykgYXMgZmlsZToKICAgICAgICAgICAgcmV0dXJuIGZpbGUucmVhZCgpLnN0cmlwKCkKICAgIHJldHVybiBOb25lCgpkZWYgaXNfY29kZV9hcHByb3ZlZChjb2RlKToKICAgICIiIkNoZWNrIGlmIHRoZSBnZW5lcmF0ZWQgY29kZSBpcyBhcHByb3ZlZCBieSBmZXRjaGluZyB0aGUgYXBwcm92YWwgbGlzdC4iIiIKICAgIHRyeToKICAgICAgICAjIFVzZSB0aGUgY29ycmVjdCByYXcgR2l0SHViIFVSTCBmb3IgdGhlIEFwcHJvdmFsIGZpbGUKICAgICAgICB1cmwgPSAiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1NlbnBhaUthenUtYWkvYXBwcm92ZS9yZWZzL2hlYWRzL21haW4vYXBwcm92YWwiCiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQodXJsLCB0aW1lb3V0PTEwKQogICAgICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoKQogICAgICAgIGFwcHJvdmVkX2NvZGVzID0gcmVzcG9uc2UudGV4dC5zcGxpdGxpbmVzKCkKICAgICAgICAjIE5vcm1hbGl6ZSBsaW5lczogc3RyaXAgd2hpdGVzcGFjZSBhbmQgaWdub3JlIGNvbW1lbnRzCiAgICAgICAgYXBwcm92ZWRfY29kZXMgPSBbbGluZS5zcGxpdCgnIycsIDEpWzBdLnN0cmlwKCkgZm9yIGxpbmUgaW4gYXBwcm92ZWRfY29kZXMgaWYgbGluZSBhbmQgbm90IGxpbmUuc3RyaXAoKS5zdGFydHN3aXRoKCcjJyldCiAgICAgICAgcmV0dXJuIGNvZGUgaW4gYXBwcm92ZWRfY29kZXMKICAgIGV4Y2VwdCByZXF1ZXN0cy5SZXF1ZXN0RXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJFcnJvciBmZXRjaGluZyB0aGUgYXBwcm92YWwgbGlzdDoge2V9IikKICAgICAgICAjIElmIHdlIGNhbm5vdCByZWFjaCBHaXRIdWIsIGJlIGNvbnNlcnZhdGl2ZSBhbmQgcmV0dXJuIEZhbHNlCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIGdlbmVyYXRlX2FuZF9jaGVja19jb2RlKCk6CiAgICAiIiJHZW5lcmF0ZSBhIGNvZGUgaWYgbm90IGV4aXN0aW5nLCBjaGVjayBpZiBpdCdzIGFwcHJvdmVkLCB0aGVuIHJldHVybiBUcnVlL0ZhbHNlLiIiIgogICAgZW5zdXJlX2ZpbGVfZXhpc3RzKCkgICMgRW5zdXJlIHRoZSBjb2RlIGZpbGUgZXhpc3RzIGJlZm9yZSBwcm9jZWVkaW5nCiAgICAKICAgIGNvZGUgPSBsb2FkX2NvZGUoKQogICAgCiAgICBpZiBjb2RlIGlzIE5vbmUgb3IgY29kZSA9PSAnJzoKCiAgICAgICAgY29kZSA9IGdlbmVyYXRlX2NvZGUoKQoKICAgICAgICBzYXZlX2NvZGUoY29kZSkKICAgICAgICBjbGVhcigpICAgICAgIAogICAgICAgIHByaW50KGYiICAgICAge3llbGxvd31ZT1VSIEdFTkVSQVRFRCBDT0RFIHt3aGl0ZX06IHtyZWR9e2NvZGV9IikKICAgIGVsc2U6CiAgICAgICAgY2xlYXIoKQogICAgICAgIHByaW50KGYiICAgICB7eWVsbG93fVlPVVIgQ09ERSB7d2hpdGV9OiB7cmVkfXtjb2RlfSIpCgogICAgaWYgaXNfY29kZV9hcHByb3ZlZChjb2RlKToKICAgICAgICAjIEFwcHJvdmVkIC0+IGFsbG93IGNhbGxlciB0byBjb250aW51ZQogICAgICAgIHJldHVybiBUcnVlCiAgICBlbHNlOgogICAgICAgICMgTm90IGFwcHJvdmVkIC0+IGJsb2NrIGFjY2VzcyBhbmQgaW5mb3JtIHVzZXIKICAgICAgICBwcmludChmIiAgICAge3JlZH3ilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcMDMzWzBtIikKICAgICAgICBwcmludChmIiAgICAge3JlZH1DT0RFIElTIE5PVCBBUFBST1ZFRCAhIHt5ZWxsb3d9UExFQVNFIFNFTkQgSVQgVE8ge3doaXRlfToge3llbGxvd31odHRwczovL3d3dy5mYWNlYm9vay5jb20vc2FtbXkudHJpc2hhMDEiKQogICAgICAgIHJldHVybiBGYWxzZQpkZWYgY29udmVyX3RvX2Nvb2tpZSh1c2VyLCBwYXNzdywgdGltZW91dD0xMCwgcmV0cmllcz0xLCBwcm94eT1Ob25lKToKCXVzZXJfYWdlbnRzID0gWwoJCSJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTEuMC40NDcyLjEyNCBTYWZhcmkvNTM3LjM2IiwKCQkiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEwOyBLKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTI0LjAuMC4wIE1vYmlsZSBTYWZhcmkvNTM3LjM2IiwKCQkiTW96aWxsYS81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyAxNF83XzEgbGlrZSBNYWMgT1MgWCkgQXBwbGVXZWJLaXQvNjA1LjEuMTUgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzE0LjEuMiBNb2JpbGUvMTVFMTQ4IFNhZmFyaS82MDQuMSIsCgkJIk1vemlsbGEvNS4wIChYMTE7IExpbnV4IHg4Nl82NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzkxLjAuNDQ3Mi4xMjQgU2FmYXJpLzUzNy4zNiIKCV0KCQoJZm9yIGF0dGVtcHQgaW4gcmFuZ2UocmV0cmllcyk6CgkJdHJ5OgoJCQlzZXNzaW9uID0gcmVxdWVzdHMuU2Vzc2lvbigpCgkJCXNlc3Npb24uaGVhZGVycy51cGRhdGUoeydBY2NlcHQtRW5jb2RpbmcnOiAnZ3ppcCwgZGVmbGF0ZSd9KQoJCQlpZiBwcm94eToKCQkJCXNlc3Npb24ucHJveGllcy51cGRhdGUoeydodHRwJzogcHJveHksICdodHRwcyc6IHByb3h5fSkKCQkJCgkJCXNlbGVjdGVkX3VhID0gcmFuZG9tLmNob2ljZSh1c2VyX2FnZW50cykKCQkJaGVhZGVycyA9IHsKCQkJCSdhdXRob3JpdHknOiAnZnJlZS5mYWNlYm9vay5jb20nLAoJCQkJJ2FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgnLAoJCQkJJ2FjY2VwdC1sYW5ndWFnZSc6ICdlbi1VUyxlbjtxPTAuOScsCgkJCQknY2FjaGUtY29udHJvbCc6ICduby1jYWNoZScsCgkJCQknY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsCgkJCQkncHJhZ21hJzogJ25vLWNhY2hlJywKCQkJCSdvcmlnaW4nOiAnaHR0cHM6Ly9mcmVlLmZhY2Vib29rLmNvbScsCgkJCQkncmVmZXJlcic6ICdodHRwczovL2ZyZWUuZmFjZWJvb2suY29tL2xvZ2luLycsCgkJCQknc2VjLWZldGNoLWRlc3QnOiAnZG9jdW1lbnQnLAoJCQkJJ3NlYy1mZXRjaC1tb2RlJzogJ25hdmlnYXRlJywKCQkJCSdzZWMtZmV0Y2gtc2l0ZSc6ICdzYW1lLW9yaWdpbicsCgkJCQknc2VjLWZldGNoLXVzZXInOiAnPzEnLAoJCQkJJ3VwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMnOiAnMScsCgkJCQkndXNlci1hZ2VudCc6IHNlbGVjdGVkX3VhLAoJCQl9CgkJCQoJCQkjIEdldCBsb2dpbiBwYWdlCgkJCWdldGxvZyA9IHNlc3Npb24uZ2V0KCdodHRwczovL2ZyZWUuZmFjZWJvb2suY29tL2xvZ2luLnBocCcsIHRpbWVvdXQ9dGltZW91dCwgaGVhZGVycz1oZWFkZXJzLCBhbGxvd19yZWRpcmVjdHM9VHJ1ZSkKCQkJcGFnZV90ZXh0ID0gZ2V0bG9nLnRleHQKCQkJCgkJCSMgRXh0cmFjdCBmb3JtIGZpZWxkcyB3aXRoIG11bHRpcGxlIHBhdHRlcm5zCgkJCWlucHV0X2ZpZWxkcyA9IHJlLmZpbmRhbGwocic8aW5wdXRbXj5dKj9uYW1lPVsiXCddKFteIlwnXSspWyJcJ11bXj5dKj92YWx1ZT1bIlwnXShbXiJcJ10qKVsiXCddJywgcGFnZV90ZXh0KQoJCQlpbnB1dF9kaWN0ID0ge2s6IHYgZm9yIGssIHYgaW4gaW5wdXRfZmllbGRzfQoJCQkKCQkJIyBUcnkgYWx0ZXJuYXRpdmUgcGF0dGVybgoJCQlpZiBsZW4oaW5wdXRfZGljdCkgPCAzOgoJCQkJaW5wdXRfZmllbGRzID0gcmUuZmluZGFsbChyJ25hbWU9WyJcJ10oW14iXCddKylbIlwnXS4qP3ZhbHVlPVsiXCddKFteIlwnXSopWyJcJ10nLCBwYWdlX3RleHQsIHJlLkRPVEFMTCkKCQkJCWlucHV0X2RpY3QudXBkYXRlKHtrOiB2IGZvciBrLCB2IGluIGlucHV0X2ZpZWxkc30pCgkJCQoJCQkjIEJ1aWxkIGxvZ2luIHBheWxvYWQgd2l0aCBhbGwgZXh0cmFjdGVkIGZpZWxkcwoJCQlpZHBhc3MgPSBkaWN0KGlucHV0X2RpY3QpCgkJCWlkcGFzc1snZW1haWwnXSA9IHVzZXIKCQkJaWRwYXNzWydwYXNzJ10gPSBwYXNzdwoJCQkKCQkJIyBFbnN1cmUgbG9naW4gYnV0dG9uIGlzIGluY2x1ZGVkCgkJCWlmICdsb2dpbicgbm90IGluIGlkcGFzczoKCQkJCWlkcGFzc1snbG9naW4nXSA9ICdMb2cgSW4nCgkJCQoJCQkjIFN1Ym1pdCBsb2dpbgoJCQljb21wID0gc2Vzc2lvbi5wb3N0KAoJCQkJJ2h0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL3JlZ3VsYXIvbG9naW4vP3NoYmw9MSZyZWZzcmM9ZGVwcmVjYXRlZCcsCgkJCQloZWFkZXJzPWhlYWRlcnMsCgkJCQlkYXRhPWlkcGFzcywKCQkJCWFsbG93X3JlZGlyZWN0cz1UcnVlLAoJCQkJdGltZW91dD10aW1lb3V0CgkJCSkKCQkJCgkJCWNvb2tpZXNfZGljdCA9IHNlc3Npb24uY29va2llcy5nZXRfZGljdCgpCgkJCQoJCQlpZiAnY191c2VyJyBpbiBjb29raWVzX2RpY3Q6CgkJCQkjIExvZ2luIHN1Y2Nlc3NmdWwgLSBub3cgZXh0cmFjdCBFQUFHIHRva2VuIGltbWVkaWF0ZWx5CgkJCQl0aW1lLnNsZWVwKDEpCgkJCQl0b2tlbl9yZXNwb25zZSA9IHNlc3Npb24uZ2V0KCdodHRwczovL2J1c2luZXNzLmZhY2Vib29rLmNvbS9jb250ZW50X21hbmFnZW1lbnQnLCB0aW1lb3V0PXRpbWVvdXQsIGhlYWRlcnM9aGVhZGVycykKCQkJCXRva2VuX3BhZ2UgPSB0b2tlbl9yZXNwb25zZS50ZXh0CgkJCQkKCQkJCWlmICdFQUFHJyBpbiB0b2tlbl9wYWdlOgoJCQkJCXRyeToKCQkJCQkJdG9rZW4gPSB0b2tlbl9wYWdlLnNwbGl0KCdFQUFHJylbMV0uc3BsaXQoJyIsIicpWzBdCgkJCQkJCWlmIHRva2VuIGFuZCBsZW4odG9rZW4pID4gMTA6CgkJCQkJCQljb29raWVfc3RyID0gIjsiLmpvaW4oW2Yie2t9PXt2fSIgZm9yIGssIHYgaW4gY29va2llc19kaWN0Lml0ZW1zKCldKQoJCQkJCQkJcmV0dXJuIHsiYSI6IFRydWUsICJiIjogZid7Y29va2llX3N0cn18RUFBR3t0b2tlbn0nLCAiZW1haWwiOiB1c2VyfQoJCQkJCWV4Y2VwdDoKCQkJCQkJcGFzcwoJCQkJCgkJCQkjIEZhbGxiYWNrOiByZXR1cm4gY29va2llIHdpdGhvdXQgdG9rZW4KCQkJCWNvb2tpZV9zdHIgPSAiOyIuam9pbihbZiJ7a309e3Z9IiBmb3IgaywgdiBpbiBjb29raWVzX2RpY3QuaXRlbXMoKV0pCgkJCQlyZXR1cm4geyJhIjogVHJ1ZSwgImIiOiBjb29raWVfc3RyLCAiZW1haWwiOiB1c2VyfQoJCQllbGlmICdjaGVja3BvaW50JyBpbiBjb29raWVzX2RpY3Q6CgkJCQlyZXR1cm4geyJhIjogRmFsc2UsICJiIjogIjpyZWQtYmFja2dyb3VuZFtlcnJvcl0gQWNjb3VudCBjaGVja3BvaW50IiwgImVtYWlsIjogdXNlcn0KCQkJZWxpZiBjb21wLnN0YXR1c19jb2RlIGluIFsyMDAsIDMwMl0gYW5kIGNvb2tpZXNfZGljdDoKCQkJCWNvb2tpZV9zdHIgPSAiOyIuam9pbihbZiJ7a309e3Z9IiBmb3IgaywgdiBpbiBjb29raWVzX2RpY3QuaXRlbXMoKV0pCgkJCQlyZXR1cm4geyJhIjogVHJ1ZSwgImIiOiBjb29raWVfc3RyLCAiZW1haWwiOiB1c2VyfQoJCQkKCQkJcmV0dXJuIHsiYSI6IEZhbHNlLCAiYiI6ICI6cmVkLWJhY2tncm91bmRbZXJyb3JdIEludmFsaWQgY3JlZGVudGlhbHMiLCAiZW1haWwiOiB1c2VyfQoJCQkJCgkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlZDoKCQkJaWYgYXR0ZW1wdCA8IHJldHJpZXMgLSAxOgoJCQkJdGltZS5zbGVlcChyYW5kb20udW5pZm9ybSgzLCA2KSkKCQkJCWNvbnRpbnVlCgkJCXJldHVybiB7ImEiOiBGYWxzZSwgImIiOiBmJ0V4Y2VwdGlvbjoge3N0cihlZClbOjQwXX0nLCAiZW1haWwiOiB1c2VyfQpkZWYgYmFuKCk6CiAgIHByaW50KGYiIiIKe05FT05fUElOS33ilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcK4pWRICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilZEK4pWRICAgICDilojilojilojilojilojilojilojilZfilojilojilZcgIOKWiOKWiOKVlyDilojilojilojilojilojilZcg4paI4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVlyDilojilojilojilojilojilojilZcgICAgICAgICAgICAgICAgICDilZEK4pWRICAgICDilojilojilZTilZDilZDilZDilZDilZ3ilojilojilZEgIOKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKVkOKVkOKVneKWiOKWiOKVlOKVkOKVkOKVkOKVkOKVnSAgICAgICAgICAgICAgICAgIOKVkQrilZEgICAgIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVneKWiOKWiOKWiOKWiOKWiOKVlyAg4paI4paI4pWRICAgICAgICAgICAgICAgICAgICAgICDilZEK4pWRICAgICDilZrilZDilZDilZDilZDilojilojilZHilojilojilZTilZDilZDilojilojilZHilojilojilZTilZDilZDilojilojilZHilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilZ0gIOKWiOKWiOKVkSAgICAgICAgICAgICAgICAgICAgICAg4pWRCuKVkSAgICAg4paI4paI4paI4paI4paI4paI4paI4pWR4paI4paI4pWRICDilojilojilZHilojilojilZEgIOKWiOKWiOKVkeKWiOKWiOKVkSAg4paI4paI4pWR4paI4paI4paI4paI4paI4paI4paI4pWX4pWa4paI4paI4paI4paI4paI4paI4pWXICAgICAgICAgICAgICAgICAg4pWRCuKVkSAgICAg4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4pWa4pWQ4pWdICDilZrilZDilZ3ilZrilZDilZ0gIOKVmuKVkOKVneKVmuKVkOKVnSAg4pWa4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdIOKVmuKVkOKVkOKVkOKVkOKVkOKVnSAgICAgICAgICAgICAgICAgIOKVkQrilZEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKVkQrilZEge05FT05fQ1lBTn3imqDvuI8gIENPREUgTk9UIEFQUFJPVkVEIC0gQUNDRVNTIERFTklFRHtORU9OX1BJTkt9ICAgICAgICAgICDilZEK4pWRICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilZEK4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdCntORU9OX0NZQU59CkNvZGVkIEJ5OiBDQVNXRUxMIENBTEVWClByb2dyYW1taW5nIExhbmd1YWdlOiBQeXRob24Ke1JFU0VUfSIiIikKCmRlZiBjbGVhcigpOgogICAgaWYoc3lzLnBsYXRmb3JtLnN0YXJ0c3dpdGgoJ3dpbicpKToKICAgICAgICBvcy5zeXN0ZW0oJ2NscycpCiAgICBlbHNlOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQoKZ29tZV90b2tlbiA9IFtdCgpkZWYgdG9reihpbnB1dF9jb29raWVzKToKICAgIGV4dHJhY3RlZF90b2tlbnMgPSBbXQogICAgZm9yIGlkeCwgY29va2llIGluIGVudW1lcmF0ZShpbnB1dF9jb29raWVzLCAxKToKICAgICAgICBoZWFkZXJfID0gewogICAgICAgICAgICAnYXV0aG9yaXR5JzogJ2J1c2luZXNzLmZhY2Vib29rLmNvbScsCiAgICAgICAgICAgICdhY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45JywKICAgICAgICAgICAgJ2FjY2VwdC1sYW5ndWFnZSc6ICd2aS1WTix2aTtxPTAuOSxmci1GUjtxPTAuOCxmcjtxPTAuNyxlbi1VUztxPTAuNixlbjtxPTAuNScsCiAgICAgICAgICAgICdjYWNoZS1jb250cm9sJzogJ21heC1hZ2U9MCcsCiAgICAgICAgICAgICdjb29raWUnOiBjb29raWUsCiAgICAgICAgICAgICdyZWZlcmVyJzogJ2h0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS8nLAogICAgICAgICAgICAnc2VjLWNoLXVhJzogJyIuTm90L0EpQnJhbmQiO3Y9Ijk5IiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjEwMyIsICJDaHJvbWl1bSI7dj0iMTAzIicsCiAgICAgICAgICAgICdzZWMtY2gtdWEtbW9iaWxlJzogJz8wJywKICAgICAgICAgICAgJ3NlYy1jaC11YS1wbGF0Zm9ybSc6ICciTGludXgiJywKICAgICAgICAgICAgJ3NlYy1mZXRjaC1kZXN0JzogJ2RvY3VtZW50JywKICAgICAgICAgICAgJ3NlYy1mZXRjaC1tb2RlJzogJ25hdmlnYXRlJywKICAgICAgICAgICAgJ3NlYy1mZXRjaC1zaXRlJzogJ3NhbWUtb3JpZ2luJywKICAgICAgICAgICAgJ3NlYy1mZXRjaC11c2VyJzogJz8xJywKICAgICAgICAgICAgJ3VwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMnOiAnMScsCiAgICAgICAgfQogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vYnVzaW5lc3MuZmFjZWJvb2suY29tL2NvbnRlbnRfbWFuYWdlbWVudCcsIGhlYWRlcnM9aGVhZGVyXywgdGltZW91dD0xMCkKICAgICAgICAgICAgaG9tZV9idXNpbmVzcyA9IHJlc3BvbnNlLnRleHQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlICE9IDIwMDoKICAgICAgICAgICAgICAgIHByaW50KGYne05FT05fR1JFRU59W3tpZHh9XXtSRVNFVH0ge05FT05fUElOS33inJd7UkVTRVR9IEhUVFAgRXJyb3Ige3Jlc3BvbnNlLnN0YXR1c19jb2RlfScpCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgJ0VBQUcnIG5vdCBpbiBob21lX2J1c2luZXNzOgogICAgICAgICAgICAgICAgaWYgJ2xvZ2luJyBpbiBob21lX2J1c2luZXNzLmxvd2VyKCkgb3IgJ2NoZWNrcG9pbnQnIGluIGhvbWVfYnVzaW5lc3MubG93ZXIoKToKICAgICAgICAgICAgICAgICAgICBwcmludChmJ3tORU9OX0dSRUVOfVt7aWR4fV17UkVTRVR9IHtORU9OX1BJTkt94pyXe1JFU0VUfSBDaGVja3BvaW50L0F1dGggcmVxdWlyZWQnKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludChmJ3tORU9OX0dSRUVOfVt7aWR4fV17UkVTRVR9IHtORU9OX1BJTkt94pyXe1JFU0VUfSBObyB0b2tlbiBmb3VuZCcpCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAKICAgICAgICAgICAgdG9rZW4gPSBob21lX2J1c2luZXNzLnNwbGl0KCdFQUFHJylbMV0uc3BsaXQoJyIsIicpWzBdCiAgICAgICAgICAgIGlmIG5vdCB0b2tlbiBvciBsZW4odG9rZW4pIDwgMTA6CiAgICAgICAgICAgICAgICBwcmludChmJ3tORU9OX0dSRUVOfVt7aWR4fV17UkVTRVR9IHtORU9OX1BJTkt94pyXe1JFU0VUfSBJbnZhbGlkIHRva2VuJykKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIAogICAgICAgICAgICBjb29raWVfdG9rZW4gPSBmJ3tjb29raWV9fEVBQUd7dG9rZW59JwogICAgICAgICAgICBnb21lX3Rva2VuLmFwcGVuZChjb29raWVfdG9rZW4pCiAgICAgICAgICAgIGV4dHJhY3RlZF90b2tlbnMuYXBwZW5kKChpZHgsIGNvb2tpZV90b2tlbikpCiAgICAgICAgICAgIHByaW50KGYne05FT05fR1JFRU59W3tpZHh9XSDinJN7UkVTRVR9IFRva2VuIGV4dHJhY3RlZCcpCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLlJlcXVlc3RFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcHJpbnQoZid7TkVPTl9HUkVFTn1be2lkeH1de1JFU0VUfSB7TkVPTl9QSU5LfeKcl3tSRVNFVH0gTmV0d29yayBlcnJvcicpCiAgICAgICAgZXhjZXB0IEluZGV4RXJyb3I6CiAgICAgICAgICAgIHByaW50KGYne05FT05fR1JFRU59W3tpZHh9XXtSRVNFVH0ge05FT05fUElOS33inJd7UkVTRVR9IFBhcnNpbmcgZmFpbGVkJykKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KGYne05FT05fR1JFRU59W3tpZHh9XXtSRVNFVH0ge05FT05fUElOS33inJd7UkVTRVR9IEVycm9yJykKICAgIHJldHVybiBleHRyYWN0ZWRfdG9rZW5zCgpkZWYgc2F2ZV90b2tlbnNfdG9fZmlsZShleHRyYWN0ZWRfdG9rZW5zKToKICAgICIiIlNhdmUgZXh0cmFjdGVkIHRva2VucyB3aXRoIGxpbmUgbnVtYmVycyB0byBhIGZpbGUuIiIiCiAgICB3aXRoIG9wZW4oVE9LRU5TX0ZJTEUsICd3JykgYXMgZmlsZToKICAgICAgICBmb3IgbGluZV9udW0sIHRva2VuIGluIGV4dHJhY3RlZF90b2tlbnM6CiAgICAgICAgICAgIGZpbGUud3JpdGUoZid7bGluZV9udW19fHt0b2tlbn1cbicpCiAgICBwcmludChmJ1x4MWJbMzg7MjsxNzM7MjU1OzQ3bVsrXSBceDFiWzM4OzI7MjMzOzIzMzsyMzNtVG9rZW5zIHNhdmVkIHRvIHtUT0tFTlNfRklMRX0nKQoKZGVmIGxvYWRfdG9rZW5zX2Zyb21fZmlsZSgpOgogICAgIiIiTG9hZCB0b2tlbnMgZnJvbSBmaWxlIHdpdGggbGluZSBudW1iZXJzLiIiIgogICAgaWYgb3MucGF0aC5leGlzdHMoVE9LRU5TX0ZJTEUpOgogICAgICAgIHRva2VucyA9IFtdCiAgICAgICAgd2l0aCBvcGVuKFRPS0VOU19GSUxFLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGZvciBsaW5lIGluIGZpbGU6CiAgICAgICAgICAgICAgICBsaW5lID0gbGluZS5zdHJpcCgpCiAgICAgICAgICAgICAgICBpZiBsaW5lOgogICAgICAgICAgICAgICAgICAgIHRva2Vucy5hcHBlbmQobGluZSkKICAgICAgICByZXR1cm4gdG9rZW5zCiAgICByZXR1cm4gW10KCmRlZiBsb2FkX2Nvb2tpZXNfZnJvbV9maWxlKGZpbGVfcGF0aCk6CiAgICAiIiJMb2FkIGNvb2tpZXMgZnJvbSBhIHRleHQgZmlsZS4iIiIKICAgIGlmIG9zLnBhdGguZXhpc3RzKGZpbGVfcGF0aCk6CiAgICAgICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3InKSBhcyBmaWxlOgogICAgICAgICAgICBjb29raWVzID0gW2xpbmUuc3RyaXAoKSBmb3IgbGluZSBpbiBmaWxlIGlmIGxpbmUuc3RyaXAoKV0KICAgICAgICByZXR1cm4gY29va2llcwogICAgZWxzZToKICAgICAgICBwcmludChmJ1x4MWJbMzg7MjsxNzM7MjU1OzQ3bVshXSBceDFiWzM4OzI7MjMzOzIzMzsyMzNtRmlsZSBub3QgZm91bmQ6IHtmaWxlX3BhdGh9JykKICAgICAgICByZXR1cm4gW10KCmRlZiBleHRyYWN0X3Rva2VuX21lbnUoKToKICAgICIiIk1lbnUgZm9yIGV4dHJhY3RpbmcgdG9rZW5zIGZyb20gYSBzaW5nbGUgY29va2llIGxpbmUuIiIiCiAgICBjbGVhcigpCiAgICBwcmludChmIiIie05FT05fUElOS30K4pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXCuKVkSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKVkQrilZEgICAg4paI4paI4paI4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKWiOKWiOKWiOKWiOKVlyDilojilojilZcgIOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKWiOKVlyAgIOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKVlyAgICAgICDilZEK4pWRICAgIOKVmuKVkOKVkOKWiOKWiOKVlOKVkOKVkOKVneKWiOKWiOKVlOKVkOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVkSDilojilojilZTilZ3ilojilojilZTilZDilZDilZDilZDilZ3ilojilojilojilojilZcgIOKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKVkOKVkOKVnSAgICAgICDilZEK4pWRICAgICAgIOKWiOKWiOKVkSAgIOKWiOKWiOKVkSAgIOKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKVlOKVnSDilojilojilojilojilojilZcgIOKWiOKWiOKVlOKWiOKWiOKVlyDilojilojilZHilojilojilojilojilojilojilojilZcgICAgICAg4pWRCuKVkSAgICAgICDilojilojilZEgICDilojilojilZEgICDilojilojilZHilojilojilZTilZDilojilojilZcg4paI4paI4pWU4pWQ4pWQ4pWdICDilojilojilZHilZrilojilojilZfilojilojilZHilZrilZDilZDilZDilZDilojilojilZEgICAgICAg4pWRCuKVkSAgICAgICDilojilojilZEgICDilZrilojilojilojilojilojilojilZTilZ3ilojilojilZEgIOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKVkSDilZrilojilojilojilojilZHilojilojilojilojilojilojilojilZEgICAgICAg4pWRCuKVkSAgICAgICDilZrilZDilZ0gICAg4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWdIOKVmuKVkOKVnSAg4pWa4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4pWa4pWQ4pWdICDilZrilZDilZDilZDilZ3ilZrilZDilZDilZDilZDilZDilZDilZ0gICAgICAg4pWRCuKVkSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKVkQrilZEgICAge05FT05fQ1lBTn1FeHRyYWN0IFRva2VuIEZyb20gQ29va2lle05FT05fUElOS30gICAgICAgICAgICDilZEK4pWRICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWRCuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnQp7UkVTRVR9IiIiKQogICAgcHJpbnQoZiJ7TkVPTl9DWUFOfeKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVl3tSRVNFVH0iKQogICAgcHJpbnQoZiJ7TkVPTl9DWUFOfeKVkXtSRVNFVH0ge05FT05fR1JFRU59WzFde1JFU0VUfSDwn5OCIExvYWQgdG9rZW5zIGZyb20gZmlsZSAgICAge05FT05fQ1lBTn3ilZF7UkVTRVR9IikKICAgIHByaW50KGYie05FT05fQ1lBTn3ilZF7UkVTRVR9IHtORU9OX0dSRUVOfVsyXXtSRVNFVH0g4pyP77iPICBQYXN0ZSB5b3VyIGNvb2tpZSBtYW51YWxseSAgICAgIHtORU9OX0NZQU594pWRe1JFU0VUfSIpCiAgICBwcmludChmIntORU9OX0NZQU594pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWde1JFU0VUfSIpCiAgICBjaG9pY2UgPSBpbnB1dChmIntORU9OX0dSRUVOfeKepCBTZWxlY3Qgb3B0aW9uOiB7UkVTRVR9Iikuc3RyaXAoKQogICAgCiAgICBpZiBjaG9pY2UgPT0gJzEnOgogICAgICAgIGZpbGVfcGF0aCA9IGlucHV0KGYie05FT05fR1JFRU594p6kIEVudGVyIGZpbGUgcGF0aDoge1JFU0VUfSIpLnN0cmlwKCkKICAgICAgICBpZiBub3QgZmlsZV9wYXRoOgogICAgICAgICAgICBwcmludChmJ3tORU9OX1BJTkt9WyFde1JFU0VUfSBObyBmaWxlIHBhdGggcHJvdmlkZWQuJykKICAgICAgICAgICAgaW5wdXQoZid7TkVPTl9DWUFOfVsqXXtSRVNFVH0gUHJlc3MgRW50ZXIgdG8gY29udGludWUuLi57UkVTRVR9JykKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgCiAgICAgICAgY29va2llcyA9IGxvYWRfY29va2llc19mcm9tX2ZpbGUoZmlsZV9wYXRoKQogICAgICAgIGlmIG5vdCBjb29raWVzOgogICAgICAgICAgICBwcmludChmJ3tORU9OX1BJTkt9WyFde1JFU0VUfSBObyBjb29raWVzIGZvdW5kIGluIGZpbGUuJykKICAgICAgICAgICAgaW5wdXQoZid7TkVPTl9DWUFOfVsqXXtSRVNFVH0gUHJlc3MgRW50ZXIgdG8gY29udGludWUuLi57UkVTRVR9JykKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgCiAgICAgICAgcHJpbnQoZid7TkVPTl9HUkVFTn1bKl17UkVTRVR9IEV4dHJhY3RpbmcgdG9rZW5zIGZyb20ge05FT05fQ1lBTn17bGVuKGNvb2tpZXMpfXtSRVNFVH0gY29va2llcy4uLicpCiAgICAgICAgcHJpbnQoZid7TkVPTl9DWUFOfeKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVl3tSRVNFVH0nKQogICAgICAgIAogICAgICAgIGV4dHJhY3RlZCA9IHRva3ooY29va2llcykKICAgICAgICAKICAgICAgICBpZiBleHRyYWN0ZWQ6CiAgICAgICAgICAgIHNhdmVfdG9rZW5zX3RvX2ZpbGUoZXh0cmFjdGVkKQogICAgICAgICAgICBwcmludChmJ3tORU9OX0NZQU594pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWde1JFU0VUfScpCiAgICAgICAgICAgIHByaW50KGYne05FT05fR1JFRU59W+Kck117UkVTRVR9IFRva2VucyBzYXZlZCBzdWNjZXNzZnVsbHkhJykKICAgICAgICAgICAgYWxsX3Rva2VucyA9IGxvYWRfdG9rZW5zX2Zyb21fZmlsZSgpCiAgICAgICAgICAgIHByaW50KGYne05FT05fR1JFRU59Wytde1JFU0VUfSBBdmFpbGFibGUgdG9rZW5zOiB7TkVPTl9DWUFOfXtsZW4oYWxsX3Rva2Vucyl9e1JFU0VUfScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoZid7TkVPTl9DWUFOfeKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnXtSRVNFVH0nKQogICAgICAgICAgICBwcmludChmJ3tORU9OX1BJTkt9WyFde1JFU0VUfSBGYWlsZWQgdG8gZXh0cmFjdCB0b2tlbnMuJykKICAgIAogICAgZWxpZiBjaG9pY2UgPT0gJzInOgogICAgICAgIGNvb2tpZSA9IGlucHV0KGYie05FT05fR1JFRU594p6kIFBhc3RlIHlvdXIgY29va2llOiB7UkVTRVR9Iikuc3RyaXAoKQogICAgICAgIAogICAgICAgIGlmIG5vdCBjb29raWU6CiAgICAgICAgICAgIHByaW50KGYne05FT05fUElOS31bIV17UkVTRVR9IE5vIGNvb2tpZSBwcm92aWRlZC4nKQogICAgICAgICAgICBpbnB1dChmJ3tORU9OX0NZQU59Wypde1JFU0VUfSBQcmVzcyBFbnRlciB0byBjb250aW51ZS4uLntSRVNFVH0nKQogICAgICAgICAgICByZXR1cm4KICAgICAgICAKICAgICAgICBwcmludChmJ3tORU9OX0dSRUVOfVsqXXtSRVNFVH0gRXh0cmFjdGluZyB0b2tlbi4uLicpCiAgICAgICAgcHJpbnQoZid7TkVPTl9DWUFOfeKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVl3tSRVNFVH0nKQogICAgICAgIAogICAgICAgIGV4dHJhY3RlZCA9IHRva3ooW2Nvb2tpZV0pCiAgICAgICAgCiAgICAgICAgaWYgZXh0cmFjdGVkOgogICAgICAgICAgICBzYXZlX3Rva2Vuc190b19maWxlKGV4dHJhY3RlZCkKICAgICAgICAgICAgcHJpbnQoZid7TkVPTl9DWUFOfeKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnXtSRVNFVH0nKQogICAgICAgICAgICBwcmludChmJ3tORU9OX0dSRUVOfVvinJNde1JFU0VUfSBUb2tlbiBzYXZlZCBzdWNjZXNzZnVsbHkhJykKICAgICAgICAgICAgYWxsX3Rva2VucyA9IGxvYWRfdG9rZW5zX2Zyb21fZmlsZSgpCiAgICAgICAgICAgIHByaW50KGYne05FT05fR1JFRU59Wytde1JFU0VUfSBBdmFpbGFibGUgdG9rZW5zOiB7TkVPTl9DWUFOfXtsZW4oYWxsX3Rva2Vucyl9e1JFU0VUfScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoZid7TkVPTl9DWUFOfeKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnXtSRVNFVH0nKQogICAgICAgICAgICBwcmludChmJ3tORU9OX1BJTkt9WyFde1JFU0VUfSBGYWlsZWQgdG8gZXh0cmFjdCB0b2tlbi4nKQogICAgZWxzZToKICAgICAgICBwcmludChmJ3tORU9OX1BJTkt9WyFde1JFU0VUfSBJbnZhbGlkIG9wdGlvbi4nKQogICAgCiAgICBpbnB1dChmJ3tORU9OX0NZQU59Wypde1JFU0VUfSBQcmVzcyBFbnRlciB0byBjb250aW51ZS4uLntSRVNFVH0nKQoKZGVmIGV4dHJhY3RfY29va2llc19tZW51KCk6CiAgICAiIiJNZW51IGZvciBleHRyYWN0aW5nIGNvb2tpZXMgZnJvbSB1c2VybmFtZS9wYXNzd29yZCBjcmVkZW50aWFscy4iIiIKICAgIGNsZWFyKCkKICAgIHByaW50KGYiIiJ7TkVPTl9QSU5LfQrilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcK4pWRICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWRCuKVkSAgICDilojilojilojilojilojilojilZcg4paI4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKWiOKWiOKWiOKWiOKVlyDilojilojilZcgIOKWiOKWiOKVl+KWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKVlyAgICAgICAg4pWRCuKVkSAgICDilojilojilZTilZDilZDilZDilZDilZ3ilojilojilZTilZDilZDilZDilojilojilZfilojilojilZTilZDilZDilojilojilZfilojilojilZEg4paI4paI4pWU4pWd4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWdICAgICAgIOKVkQrilZEgICAg4paI4paI4pWRICAgICDilojilojilZEgICDilojilojilZHilojilojilZEgIOKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKVlOKVnSDilojilojilZHilojilojilojilojilojilZcgIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVlyAgICAgICDilZEK4pWRICAgIOKWiOKWiOKVkSAgICAg4paI4paI4pWRICAg4paI4paI4pWR4paI4paI4pWRICDilojilojilZHilojilojilZTilZDilojilojilZcg4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4pWdICDilZrilZDilZDilZDilZDilojilojilZEgICAgICAg4pWRCuKVkSAgICDilZrilojilojilojilojilojilojilZfilZrilojilojilojilojilojilojilZTilZ3ilojilojilojilojilojilojilZTilZ3ilojilojilZEgIOKWiOKWiOKVl+KWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKVkSAgICAgICDilZEK4pWRICAgICDilZrilZDilZDilZDilZDilZDilZ0g4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWdIOKVmuKVkOKVkOKVkOKVkOKVkOKVnSDilZrilZDilZ0gIOKVmuKVkOKVneKVmuKVkOKVneKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVneKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVnSAgICAgICDilZEK4pWRICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWRCuKVkSAgICAge05FT05fQ1lBTn1FeHRyYWN0IENvb2tpZXMgRnJvbSBDcmVkZW50aWFsc3tORU9OX1BJTkt9ICAgIOKVkQrilZEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilZEK4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdCntSRVNFVH0iIiIpCiAgICBwcmludChmIntORU9OX0NZQU594pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXe1JFU0VUfSIpCiAgICBwcmludChmIntORU9OX0NZQU594pWRe1JFU0VUfSB7TkVPTl9HUkVFTn1bMV17UkVTRVR9IPCfk4IgTG9hZCBmcm9tIGZpbGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtORU9OX0NZQU594pWRe1JFU0VUfSIpCiAgICBwcmludChmIntORU9OX0NZQU594pWRe1JFU0VUfSB7TkVPTl9HUkVFTn1bMl17UkVTRVR9IOKMqO+4jyAgRW50ZXIgbWFudWFsbHkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtORU9OX0NZQU594pWRe1JFU0VUfSIpCiAgICBwcmludChmIntORU9OX0NZQU594pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWde1JFU0VUfSIpCiAgICBjaG9pY2UgPSBpbnB1dChmIntORU9OX0dSRUVOfeKepCBTZWxlY3Qgb3B0aW9uOiB7UkVTRVR9Iikuc3RyaXAoKQogICAgCiAgICBjcmVkZW50aWFscyA9IFtdCiAgICAKICAgIGlmIGNob2ljZSA9PSAnMSc6CiAgICAgICAgZmlsZV9wYXRoID0gaW5wdXQoZiJ7TkVPTl9HUkVFTn3inqQgRW50ZXIgZmlsZSBwYXRoIChlbWFpbDpwYXNzd29yZCBmb3JtYXQpOiB7UkVTRVR9Iikuc3RyaXAoKQogICAgICAgIGlmIG5vdCBmaWxlX3BhdGg6CiAgICAgICAgICAgIHByaW50KGYne05FT05fUElOS31bIV17UkVTRVR9IE5vIGZpbGUgcGF0aCBwcm92aWRlZC4nKQogICAgICAgICAgICBpbnB1dChmJ3tORU9OX0NZQU59Wypde1JFU0VUfSBQcmVzcyBFbnRlciB0byBjb250aW51ZS4uLntSRVNFVH0nKQogICAgICAgICAgICByZXR1cm4KICAgICAgICAKICAgICAgICBpZiBvcy5wYXRoLmV4aXN0cyhmaWxlX3BhdGgpOgogICAgICAgICAgICB3aXRoIG9wZW4oZmlsZV9wYXRoLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgICAgICBjcmVkZW50aWFscyA9IFtsaW5lLnN0cmlwKCkgZm9yIGxpbmUgaW4gZmlsZSBpZiBsaW5lLnN0cmlwKCkgYW5kICc6JyBpbiBsaW5lXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGYne05FT05fUElOS31bIV17UkVTRVR9IEZpbGUgbm90IGZvdW5kLicpCiAgICAgICAgICAgIGlucHV0KGYne05FT05fQ1lBTn1bKl17UkVTRVR9IFByZXNzIEVudGVyIHRvIGNvbnRpbnVlLi4ue1JFU0VUfScpCiAgICAgICAgICAgIHJldHVybgogICAgCiAgICBlbGlmIGNob2ljZSA9PSAnMic6CiAgICAgICAgY3JlZF9pbnB1dCA9IGlucHV0KGYie05FT05fR1JFRU594p6kIEVudGVyIGNyZWRlbnRpYWxzIChlbWFpbDpwYXNzd29yZCk6IHtSRVNFVH0iKS5zdHJpcCgpCiAgICAgICAgaWYgJzonIG5vdCBpbiBjcmVkX2lucHV0OgogICAgICAgICAgICBwcmludChmJ3tORU9OX1BJTkt9WyFde1JFU0VUfSBJbnZhbGlkIGZvcm1hdC4gVXNlIGVtYWlsOnBhc3N3b3JkJykKICAgICAgICAgICAgaW5wdXQoZid7TkVPTl9DWUFOfVsqXXtSRVNFVH0gUHJlc3MgRW50ZXIgdG8gY29udGludWUuLi57UkVTRVR9JykKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgY3JlZGVudGlhbHMgPSBbY3JlZF9pbnB1dF0KICAgIGVsc2U6CiAgICAgICAgcHJpbnQoZid7TkVPTl9QSU5LfVshXXtSRVNFVH0gSW52YWxpZCBvcHRpb24uJykKICAgICAgICBpbnB1dChmJ3tORU9OX0NZQU59Wypde1JFU0VUfSBQcmVzcyBFbnRlciB0byBjb250aW51ZS4uLntSRVNFVH0nKQogICAgICAgIHJldHVybgogICAgCiAgICBpZiBub3QgY3JlZGVudGlhbHM6CiAgICAgICAgcHJpbnQoZid7TkVPTl9QSU5LfVshXXtSRVNFVH0gTm8gY3JlZGVudGlhbHMgZm91bmQuJykKICAgICAgICBpbnB1dChmJ3tORU9OX0NZQU59Wypde1JFU0VUfSBQcmVzcyBFbnRlciB0byBjb250aW51ZS4uLntSRVNFVH0nKQogICAgICAgIHJldHVybgogICAgCiAgICBwcmludChmJ3tORU9OX0dSRUVOfVsqXXtSRVNFVH0gRXh0cmFjdGluZyBjb29raWVzIGZyb20ge05FT05fQ1lBTn17bGVuKGNyZWRlbnRpYWxzKX17UkVTRVR9IGFjY291bnRzLi4uJykKICAgIHByaW50KGYne05FT05fQ1lBTn3ilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZd7UkVTRVR9JykKICAgIAogICAgZXh0cmFjdGVkX2Nvb2tpZXMgPSBbXQogICAgZm9yIGlkeCwgY3JlZCBpbiBlbnVtZXJhdGUoY3JlZGVudGlhbHMsIDEpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZW1haWwsIHBhc3N3b3JkID0gY3JlZC5zcGxpdCgnOicsIDEpCiAgICAgICAgICAgIHJlc3VsdCA9IGNvbnZlcl90b19jb29raWUoZW1haWwuc3RyaXAoKSwgcGFzc3dvcmQuc3RyaXAoKSwgdGltZW91dD0xNSwgcmV0cmllcz0yKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgcmVzdWx0WydhJ106CiAgICAgICAgICAgICAgICBleHRyYWN0ZWRfY29va2llcy5hcHBlbmQocmVzdWx0WydiJ10pCiAgICAgICAgICAgICAgICBwcmludChmJ3tORU9OX0dSRUVOfVt7aWR4fV0g4pyTe1JFU0VUfSBDb29raWUgZXh0cmFjdGVkIGZvciB7TkVPTl9DWUFOfXtlbWFpbH17UkVTRVR9JykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KGYne05FT05fUElOS31be2lkeH1dIOKcl3tSRVNFVH0ge3Jlc3VsdFsiYiJdfScpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChmJ3tORU9OX1BJTkt9W3tpZHh9XSDinJd7UkVTRVR9IEVycm9yOiB7c3RyKGUpWzo1MF19JykKICAgIAogICAgaWYgZXh0cmFjdGVkX2Nvb2tpZXM6CiAgICAgICAgcHJpbnQoZid7TkVPTl9HUkVFTn1bKl17UkVTRVR9IFZhbGlkYXRpbmcgY29va2llcy4uLicpCiAgICAgICAgdmFsaWRfY29va2llcyA9IFtdCiAgICAgICAgZm9yIGlkeCwgY29va2llIGluIGVudW1lcmF0ZShleHRyYWN0ZWRfY29va2llcywgMSk6CiAgICAgICAgICAgIGlmIHZhbGlkYXRlX2Nvb2tpZShjb29raWUpOgogICAgICAgICAgICAgICAgdmFsaWRfY29va2llcy5hcHBlbmQoY29va2llKQogICAgICAgICAgICAgICAgcHJpbnQoZid7TkVPTl9HUkVFTn1be2lkeH1dIOKck3tSRVNFVH0gQ29va2llIGlzIHZhbGlkJykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KGYne05FT05fUElOS31be2lkeH1dIOKcl3tSRVNFVH0gQ29va2llIGlzIGludmFsaWQgb3IgZXhwaXJlZCcpCiAgICAgICAgCiAgICAgICAgaWYgdmFsaWRfY29va2llczoKICAgICAgICAgICAgd2l0aCBvcGVuKENPT0tJRVNfRklMRSwgJ2EnKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgZm9yIGNvb2tpZSBpbiB2YWxpZF9jb29raWVzOgogICAgICAgICAgICAgICAgICAgIGZpbGUud3JpdGUoY29va2llICsgJ1xuJykKICAgICAgICAgICAgcHJpbnQoZid7TkVPTl9DWUFOfeKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnXtSRVNFVH0nKQogICAgICAgICAgICBwcmludChmJ3tORU9OX0dSRUVOfVvinJNde1JFU0VUfSB7TkVPTl9DWUFOfXtsZW4odmFsaWRfY29va2llcyl9L3tsZW4oZXh0cmFjdGVkX2Nvb2tpZXMpfXtSRVNFVH0gdmFsaWQgY29va2llcyBzYXZlZCB0byB7TkVPTl9HUkVFTn17Q09PS0lFU19GSUxFfXtSRVNFVH0nKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGYne05FT05fQ1lBTn3ilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ17UkVTRVR9JykKICAgICAgICAgICAgcHJpbnQoZid7TkVPTl9QSU5LfVshXXtSRVNFVH0gTm8gdmFsaWQgY29va2llcyB0byBzYXZlLicpCiAgICBlbHNlOgogICAgICAgIHByaW50KGYne05FT05fQ1lBTn3ilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ17UkVTRVR9JykKICAgICAgICBwcmludChmJ3tORU9OX1BJTkt9WyFde1JFU0VUfSBObyBjb29raWVzIGV4dHJhY3RlZC4nKQogICAgCiAgICBpbnB1dChmJ3tORU9OX0NZQU59Wypde1JFU0VUfSBQcmVzcyBFbnRlciB0byBjb250aW51ZS4uLntSRVNFVH0nKQoKZGVmIHZhbGlkYXRlX2Nvb2tpZShjb29raWUpOgogICAgIiIiQ2hlY2sgaWYgYSBjb29raWUgaXMgdmFsaWQgYnkgdmVyaWZ5aW5nIGl0IGhhcyByZXF1aXJlZCBGYWNlYm9vayBzZXNzaW9uIGNvb2tpZXMuIiIiCiAgICB0cnk6CiAgICAgICAgIyBDaGVjayBpZiBjb29raWUgY29udGFpbnMgcmVxdWlyZWQgbG9naW4gaW5kaWNhdG9ycwogICAgICAgIHJlcXVpcmVkX2Nvb2tpZXMgPSBbJ2NfdXNlcicsICd4cyddCiAgICAgICAgaGFzX3JlcXVpcmVkID0gYWxsKGYne3JjfT0nIGluIGNvb2tpZSBmb3IgcmMgaW4gcmVxdWlyZWRfY29va2llcykKICAgICAgICAKICAgICAgICBpZiBub3QgaGFzX3JlcXVpcmVkOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAKICAgICAgICBoZWFkZXJzID0gewogICAgICAgICAgICAnYXV0aG9yaXR5JzogJ2J1c2luZXNzLmZhY2Vib29rLmNvbScsCiAgICAgICAgICAgICdhY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44JywKICAgICAgICAgICAgJ2Nvb2tpZSc6IGNvb2tpZSwKICAgICAgICAgICAgJ3VzZXItYWdlbnQnOiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2JwogICAgICAgIH0KICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9idXNpbmVzcy5mYWNlYm9vay5jb20vY29udGVudF9tYW5hZ2VtZW50JywgaGVhZGVycz1oZWFkZXJzLCB0aW1lb3V0PTUpCiAgICAgICAgCiAgICAgICAgIyBDaGVjayBpZiByZXNwb25zZSBpbmRpY2F0ZXMgbG9nZ2VkLWluIHN0YXRlCiAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICBpZiAnRUFBRycgaW4gcmVzcG9uc2UudGV4dDoKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsaWYgJ2xvZ2luJyBpbiByZXNwb25zZS50ZXh0Lmxvd2VyKCkgb3IgJ2NoZWNrcG9pbnQnIGluIHJlc3BvbnNlLnRleHQubG93ZXIoKToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAogICAgICAgIHJldHVybiBGYWxzZQogICAgZXhjZXB0OgogICAgICAgIHJldHVybiBGYWxzZQoKZGVmIG1lbnUoKToKICAgIGNsZWFyKCkKICAgIHByaW50KGYiIiJ7TkVPTl9QSU5LfQrilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcK4pWRICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWRCuKVkSAgICDilojilojilojilojilojilojilojilZfilojilojilojilojilojilZcg4paI4paI4paI4pWXICAg4paI4paI4paI4pWX4paI4paI4paI4pWXICAg4paI4paI4paI4pWX4paI4paI4pWXICAg4paI4paI4pWX4paI4paI4paI4paI4paI4paI4paI4pWXICAgICDilZEK4pWRICAgIOKWiOKWiOKVlOKVkOKVkOKVkOKVkOKVneKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKVlyDilojilojilojilojilZHilojilojilojilojilZcg4paI4paI4paI4paI4pWR4pWa4paI4paI4pWXIOKWiOKWiOKVlOKVneKWiOKWiOKVlOKVkOKVkOKVkOKVkOKVnSAgICDilZEK4pWRICAgIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKVkeKWiOKWiOKVlOKWiOKWiOKWiOKWiOKVlOKWiOKWiOKVkeKWiOKWiOKVlOKWiOKWiOKWiOKWiOKVlOKWiOKWiOKVkSDilZrilojilojilojilojilZTilZ0g4paI4paI4paI4paI4paI4paI4paI4pWXICAgIOKVkQrilZEgICAg4pWa4pWQ4pWQ4pWQ4pWQ4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4paI4paI4pWR4paI4paI4pWR4pWa4paI4paI4pWU4pWd4paI4paI4pWR4paI4paI4pWR4pWa4paI4paI4pWU4pWd4paI4paI4pWRICDilZrilojilojilZTilZ0gIOKVmuKVkOKVkOKVkOKVkOKWiOKWiOKVkSAgICDilZEK4pWRICAgIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVkeKWiOKWiOKVkSAg4paI4paI4pWR4paI4paI4pWRIOKVmuKVkOKVnSDilojilojilZHilojilojilZEg4pWa4pWQ4pWdIOKWiOKWiOKVkSAgIOKWiOKWiOKVkSAgIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVkSAgICDilZEK4pWRICAgIOKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVneKVmuKVkOKVnSAg4pWa4pWQ4pWd4pWa4pWQ4pWdICAgICDilZrilZDilZ3ilZrilZDilZ0gICAgIOKVmuKVkOKVnSAgIOKVmuKVkOKVnSAgIOKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVnSAgICDilZEK4pWRICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWRCuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnQoKe05FT05fQ1lBTn3ilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZd7UkVTRVR9CntORU9OX0NZQU594pWRe1JFU0VUfSB7TkVPTl9HUkVFTn1bMV17UkVTRVR9IOKaoSBGYXN0IE1vZGUgICAgICB7TkVPTl9HUkVFTn1TaGFyZSBwb3N0cyBhdCBoaWdoIHNwZWVke1JFU0VUfSAgICAgICAgICAgICAgIHtORU9OX0NZQU594pWRe1JFU0VUfQp7TkVPTl9DWUFOfeKVkXtSRVNFVH0ge05FT05fR1JFRU59WzJde1JFU0VUfSDwn5CMIFNsb3cgTW9kZSAgICAgIHtORU9OX0dSRUVOfVNoYXJlIHdpdGggZGVsYXlzIChzYWZlcil7UkVTRVR9ICAgICAgICAgICAgICAge05FT05fQ1lBTn3ilZF7UkVTRVR9CntORU9OX0NZQU594pWRe1JFU0VUfSB7TkVPTl9HUkVFTn1bM117UkVTRVR9IPCflJEgRXh0cmFjdCBUb2tlbiAge05FT05fR1JFRU59RXh0cmFjdCB0b2tlbnMgZnJvbSBjb29raWVze1JFU0VUfSAgICAgICAgICAgICB7TkVPTl9DWUFOfeKVkXtSRVNFVH0Ke05FT05fQ1lBTn3ilZF7UkVTRVR9IHtORU9OX0dSRUVOfVs0XXtSRVNFVH0g8J+NqiBFeHRyYWN0IENvb2tpZSB7TkVPTl9HUkVFTn1HZW5lcmF0ZSBjb29raWVzIGZyb20gYWNjb3VudHN7UkVTRVR9ICAgICAgICAgIHtORU9OX0NZQU594pWRe1JFU0VUfQp7TkVPTl9DWUFOfeKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnXtSRVNFVH0Ke1JFU0VUfSIiIikKICAgIGNob2ljZSA9IGlucHV0KGYie05FT05fR1JFRU594p6kIFNlbGVjdCBtb2RlOiB7UkVTRVR9IikKICAgIHJldHVybiBjaG9pY2UKCmRlZiBzaGFyKCk6CiAgICBjaG9pY2UgPSBtZW51KCkKICAgIAogICAgaWYgY2hvaWNlID09ICczJzoKICAgICAgICBleHRyYWN0X3Rva2VuX21lbnUoKQogICAgICAgIHJldHVybgogICAgZWxpZiBjaG9pY2UgPT0gJzQnOgogICAgICAgIGV4dHJhY3RfY29va2llc19tZW51KCkKICAgICAgICByZXR1cm4KICAgIAogICAgcHJpbnQoZiIiIntORU9OX1BJTkt9CuKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlwrilZEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilZEK4pWRICAgICDilojilojilojilojilojilojilojilZfilojilojilZcgIOKWiOKWiOKVlyDilojilojilojilojilojilZcg4paI4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVlyDilojilojilojilojilojilojilZcgICAgICAgICAg4pWRCuKVkSAgICAg4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4paI4paI4pWRICDilojilojilZHilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilZDilZDilZ3ilojilojilZTilZDilZDilZDilZDilZ0gICAgICAgICAg4pWRCuKVkSAgICAg4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4paI4paI4paI4paI4paI4pWR4paI4paI4paI4paI4paI4paI4paI4pWR4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4paI4paI4paI4pWXICDilojilojilZEgICAgICAgICAgICAgICDilZEK4pWRICAgICDilZrilZDilZDilZDilZDilojilojilZHilojilojilZTilZDilZDilojilojilZHilojilojilZTilZDilZDilojilojilZHilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilZ0gIOKWiOKWiOKVkSAgICAgICAgICAgICAgIOKVkQrilZEgICAgIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVkeKWiOKWiOKVkSAg4paI4paI4pWR4paI4paI4pWRICDilojilojilZHilojilojilZEgIOKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KVmuKWiOKWiOKWiOKWiOKWiOKWiOKVlyAgICAgICAgICDilZEK4pWRICAgICDilZrilZDilZDilZDilZDilZDilZDilZ3ilZrilZDilZ0gIOKVmuKVkOKVneKVmuKVkOKVnSAg4pWa4pWQ4pWd4pWa4pWQ4pWdICDilZrilZDilZ3ilZrilZDilZDilZDilZDilZDilZDilZ0g4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWdICAgICAgICAgIOKVkQrilZEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilZEK4pWRICAgICAgICB7TkVPTl9DWUFOfUNvZGVkIEJ5OiBDQVNXRUxMIENBTEVWIHwgUHl0aG9ue05FT05fUElOS30g4pWRCuKVkSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKVkQrilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ0Ke1JFU0VUfSIiIikKICAgIAogICAgYWxsID0gbG9hZF90b2tlbnNfZnJvbV9maWxlKCkKICAgIAogICAgaWYgbm90IGFsbDoKICAgICAgICBwcmludChmJ3tORU9OX1BJTkt9WyFde1JFU0VUfSBObyB0b2tlbnMgZm91bmQuIEV4dHJhY3QgdG9rZW5zIGZpcnN0IHVzaW5nIG9wdGlvbiAzLicpCiAgICAgICAgaW5wdXQoZid7TkVPTl9DWUFOfVsqXXtSRVNFVH0gUHJlc3MgRW50ZXIgdG8gY29udGludWUuLi57UkVTRVR9JykKICAgICAgICByZXR1cm4KICAgIAogICAgaWRfc2hhcmUgPSBpbnB1dChmIntORU9OX0dSRUVOfeKepCBFbnRlciBQb3N0IElEOiB7UkVTRVR9IikKICAgIHRvdGFsX3NoYXJlID0gaW50KGlucHV0KGYie05FT05fR1JFRU594p6kIEhvdyBNYW55IFNoYXJlczoge1JFU0VUfSIpKQogICAgZGVsYXkgPSBpbnQoaW5wdXQoZiJ7TkVPTl9HUkVFTn3inqQgRGVsYXkgQmV0d2VlbiBTaGFyZXMgKHNlY29uZHMpOiB7UkVTRVR9IikpCiAgICBwcmludChmJ3tORU9OX0NZQU594pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXe1JFU0VUfScpCiAgICAKICAgIHRvdGFsX2xpdmUgPSBsZW4oYWxsKQogICAgcHJpbnQoZid7TkVPTl9HUkVFTn1bK117UkVTRVR9IExvYWRlZDoge05FT05fQ1lBTn17dG90YWxfbGl2ZX17UkVTRVR9IFRva2VucycpCiAgICBwcmludChmJ3tORU9OX0NZQU594pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWde1JFU0VUfScpCiAgICAKICAgIGZhaWxlZF90b2tlbnMgPSBbXQogICAgc3VjY2Vzc2Z1bF9zaGFyZXMgPSAwCiAgICBzdHQgPSAwCiAgICAKICAgIGlmIGNob2ljZSA9PSAnMSc6CiAgICAgICAgd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MTApIGFzIGV4ZWN1dG9yOgogICAgICAgICAgICBmdXR1cmVzID0ge30KICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UodG90YWxfc2hhcmUpOgogICAgICAgICAgICAgICAgdG9rZW5fZW50cnkgPSBhbGxbc3R0ICUgdG90YWxfbGl2ZV0KICAgICAgICAgICAgICAgIHN0dCArPSAxCiAgICAgICAgICAgICAgICBjb29raWVfdG9rZW4gPSAnfCcuam9pbih0b2tlbl9lbnRyeS5zcGxpdCgnfCcpWzE6XSkKICAgICAgICAgICAgICAgIGZ1dHVyZSA9IGV4ZWN1dG9yLnN1Ym1pdChzaGFyZSwgY29va2llX3Rva2VuLCBpZF9zaGFyZSkKICAgICAgICAgICAgICAgIGZ1dHVyZXNbZnV0dXJlXSA9ICh0b2tlbl9lbnRyeSwgY29va2llX3Rva2VuKQogICAgICAgICAgICAgICAgcHJpbnQoZid7TkVPTl9HUkVFTn1b4pqhXXtSRVNFVH0gQXR0ZW1wdGVkOiB7TkVPTl9DWUFOfXtzdHR9L3t0b3RhbF9zaGFyZX17UkVTRVR9JywgZW5kPSdccicpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuMSkgICMgU21hbGwgZGVsYXkgdG8gYXZvaWQgb3ZlcndoZWxtaW5nIHRoZSBBUEkKICAgICAgICAgICAgCiAgICAgICAgICAgIGZvciBmdXR1cmUgaW4gZnV0dXJlczoKICAgICAgICAgICAgICAgIHRva2VuX2VudHJ5LCBjb29raWVfdG9rZW4gPSBmdXR1cmVzW2Z1dHVyZV0KICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1dHVyZS5yZXN1bHQoKQogICAgICAgICAgICAgICAgaWYgcmVzdWx0OgogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NmdWxfc2hhcmVzICs9IDEKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZmFpbGVkX3Rva2Vucy5hcHBlbmQodG9rZW5fZW50cnkpCiAgICBlbHNlOgogICAgICAgIHN0dCA9IDAKICAgICAgICB3aGlsZSBzdHQgPCB0b3RhbF9zaGFyZToKICAgICAgICAgICAgZm9yIHRva2VuX2VudHJ5IGluIGFsbDoKICAgICAgICAgICAgICAgIGlmIHN0dCA+PSB0b3RhbF9zaGFyZToKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgc3R0ID0gc3R0ICsgMQogICAgICAgICAgICAgICAgY29va2llX3Rva2VuID0gJ3wnLmpvaW4odG9rZW5fZW50cnkuc3BsaXQoJ3wnKVsxOl0pCiAgICAgICAgICAgICAgICByZXN1bHQgPSBzaGFyZShjb29raWVfdG9rZW4sIGlkX3NoYXJlKQogICAgICAgICAgICAgICAgaWYgcmVzdWx0OgogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NmdWxfc2hhcmVzICs9IDEKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZmFpbGVkX3Rva2Vucy5hcHBlbmQodG9rZW5fZW50cnkpCiAgICAgICAgICAgICAgICBwcmludChmJ3tORU9OX0dSRUVOfVvwn5CMXXtSRVNFVH0gQXR0ZW1wdGVkOiB7TkVPTl9DWUFOfXtzdHR9L3t0b3RhbF9zaGFyZX17UkVTRVR9JywgZW5kPSdccicpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKGRlbGF5KQogICAgCiAgICBpZiBmYWlsZWRfdG9rZW5zOgogICAgICAgIHJlbWFpbmluZ190b2tlbnMgPSBbdG9rZW4gZm9yIHRva2VuIGluIGFsbCBpZiB0b2tlbiBub3QgaW4gZmFpbGVkX3Rva2Vuc10KICAgICAgICB3aXRoIG9wZW4oVE9LRU5TX0ZJTEUsICd3JykgYXMgZmlsZToKICAgICAgICAgICAgZm9yIHRva2VuIGluIHJlbWFpbmluZ190b2tlbnM6CiAgICAgICAgICAgICAgICBmaWxlLndyaXRlKHRva2VuICsgJ1xuJykKICAgIAogICAgcHJpbnQoZidcbntORU9OX0NZQU594pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXe1JFU0VUfScpCiAgICBwcmludChmJ3tORU9OX0NZQU594pWRe1JFU0VUfSB7TkVPTl9HUkVFTn3inJMgU3VjY2Vzc2Z1bCBTaGFyZXN7UkVTRVR9OiB7TkVPTl9HUkVFTn17c3VjY2Vzc2Z1bF9zaGFyZXN9e1JFU0VUfScgKyAnICcgKiAoNTAgLSBsZW4oc3RyKHN1Y2Nlc3NmdWxfc2hhcmVzKSkpICsgZid7TkVPTl9DWUFOfeKVkXtSRVNFVH0nKQogICAgcHJpbnQoZid7TkVPTl9DWUFOfeKVkXtSRVNFVH0ge05FT05fUElOS33inJcgRmFpbGVkIFNoYXJlc3tSRVNFVH06IHtORU9OX1BJTkt9e2xlbihmYWlsZWRfdG9rZW5zKX17UkVTRVR9JyArICcgJyAqICg1NSAtIGxlbihzdHIobGVuKGZhaWxlZF90b2tlbnMpKSkpICsgZid7TkVPTl9DWUFOfeKVkXtSRVNFVH0nKQogICAgcHJpbnQoZid7TkVPTl9DWUFOfeKVkXtSRVNFVH0ge05FT05fWUVMTE9XfSEgUmVtYWluaW5nIFRva2Vuc3tSRVNFVH06IHtORU9OX1lFTExPV317bGVuKGFsbCkgLSBsZW4oZmFpbGVkX3Rva2Vucyl9e1JFU0VUfScgKyAnICcgKiAoNTAgLSBsZW4oc3RyKGxlbihhbGwpIC0gbGVuKGZhaWxlZF90b2tlbnMpKSkpICsgZid7TkVPTl9DWUFOfeKVkXtSRVNFVH0nKQogICAgcHJpbnQoZid7TkVPTl9DWUFOfeKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnXtSRVNFVH0nKQogICAgCiAgICBnb21lX3Rva2VuLmNsZWFyKCkKICAgIGlucHV0KGYne05FT05fQ1lBTn1bKl17UkVTRVR9IFByZXNzIEVudGVyIHRvIGNvbnRpbnVlLi4ue1JFU0VUfScpCgpkZWYgc2hhcmUoY29va2llX3Rva2VuLCBwb3N0X2lkKToKICAgICIiIlNoYXJlIGEgcG9zdCB1c2luZyB0aGUgcHJvdmlkZWQgdG9rZW4uIiIiCiAgICB0cnk6CiAgICAgICAgcGFydHMgPSBjb29raWVfdG9rZW4uc3BsaXQoJ3wnKQogICAgICAgIGlmIGxlbihwYXJ0cykgPCAyOgogICAgICAgICAgICBwcmludChmJ3tORU9OX1BJTkt9WyFde1JFU0VUfSBJbnZhbGlkIHRva2VuIGZvcm1hdCcpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAogICAgICAgIGNvb2tpZSA9IHBhcnRzWzBdCiAgICAgICAgdG9rZW4gPSBwYXJ0c1sxXQogICAgICAgIAogICAgICAgIGhlYWRlcnMgPSB7CiAgICAgICAgICAgICdhY2NlcHQnOiAnKi8qJywKICAgICAgICAgICAgJ2FjY2VwdC1lbmNvZGluZyc6ICdnemlwLCBkZWZsYXRlJywKICAgICAgICAgICAgJ2Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsCiAgICAgICAgICAgICdjb250ZW50LWxlbmd0aCc6ICcwJywKICAgICAgICAgICAgJ2Nvb2tpZSc6IGNvb2tpZSwKICAgICAgICAgICAgJ2hvc3QnOiAnZ3JhcGguZmFjZWJvb2suY29tJwogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLnBvc3QoCiAgICAgICAgICAgIGYnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvZmVlZD9saW5rPWh0dHBzOi8vbS5mYWNlYm9vay5jb20ve3Bvc3RfaWR9JnB1Ymxpc2hlZD0wJmFjY2Vzc190b2tlbj17dG9rZW59JywKICAgICAgICAgICAgaGVhZGVycz1oZWFkZXJzLAogICAgICAgICAgICB0aW1lb3V0PTEwCiAgICAgICAgKQogICAgICAgIAogICAgICAgIGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgcHJpbnQoZid7TkVPTl9HUkVFTn1b4pyTXXtSRVNFVH0gU2hhcmUgc3VjY2Vzc2Z1bCcpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoZid7TkVPTl9QSU5LfVvinJdde1JFU0VUfSBTaGFyZSBmYWlsZWQ6IHtyZXNwb25zZS5zdGF0dXNfY29kZX0nKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmJ3tORU9OX1BJTkt9WyFde1JFU0VUfSBFcnJvcjoge3N0cihlKVs6NTBdfScpCiAgICAgICAgcmV0dXJuIEZhbHNlICAgIAogICAgCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBpZiBnZW5lcmF0ZV9hbmRfY2hlY2tfY29kZSgpOgogICAgICAgIHNoYXIoKQogICAgZWxzZToKICAgICAgICBiYW4oKQ=='))